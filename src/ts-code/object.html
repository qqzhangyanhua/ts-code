<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body></body>
  <script>
    // function TreeNode(val, left, right) {
    //   this.val = val === undefined ? 0 : val;
    //   this.left = left === undefined ? null : left;
    //   this.right = right === undefined ? null : right;
    // }
    // //
    // const root = {
    //   val: "A",
    //   left: {
    //     val: "B",
    //     left: {
    //       val: "D",
    //     },
    //     right: {
    //       val: "E",
    //     },
    //   },
    //   right: {
    //     val: "C",
    //     right: {
    //       val: "F",
    //     },
    //   },
    // };

    const aRoot = {
      val: 1,
      left: { val: 111 },
      right: { val: 11111, left: { val: 1 }, right: { val: 4 } },
    };

    class Node {
      constructor(val, next) {
        this.val = val !== undefined ? val : -1;
        this.next = next !== undefined ? next : null;
      }
    }
    var subdomainVisit = function (cpdomains) {
      let obj = new Map();
      for (let i = 0; i < cpdomains.length; i++) {
        let count = 0;
        let str = "";
        count = +cpdomains[i].split(" ")[0];
        str = cpdomains[i].split(" ")[1];
        obj.has(str) ? obj.set(str, obj.get(str) + count) : obj.set(str, count);
        while (str.indexOf(".") > -1) {
          str = str.substr(str.indexOf(".") + 1);
          obj.has(str)
            ? obj.set(str, obj.get(str) + count)
            : obj.set(str, count);
        }
      }
      let arr = [];
      obj.forEach((value, key, map) => {
        let str = value + " " + key;
        arr.push(str);
      });
      return arr;
    };

    const nums = [1, 2, 2, 3, 1];
    // var findShortestSubArray = function (nums) {
    //   let map = new Map();
    //   let len = nums.length;
    //   if (nums.length == 0) {
    //     return 0;
    //   }
    //   for (let i = 0; i < nums.length; i++) {
    //     if (map.has(nums[i])) {
    //       const val = map.get(nums[i]);
    //       map.set(nums[i], val + 1);
    //     } else {
    //       map.set(nums[i], 1);
    //     }
    //   }
    //   const max = Math.max(...map.values());
    //   const arr = [];
    //   for (let i = 0; i < nums.length; i++) {
    //     const cur = nums[i];
    //     if (cur === max) {
    //       let start = nums.indexOf(cur);
    //       console.log(nums[i], max, i);
    //       arr.push(i);
    //     }

    //     const maxIndex = Math.max(...arr);
    //     console.log(maxIndex, max, len);
    //     len = Math.min(nums.length, maxIndex);
    //   }
    //   return len;
    // };
    var nums2 = [1, 2, 2, 3, 1, 4, 2];
    var findShortestSubArray = function (nums) {
      let map = new Map();
      let size = 1;
      let distance = nums.length;
      for (let i = 0; i < nums.length; i++) {
        if (map.has(nums[i])) {
          const val = map.get(nums[i]);
          map.set(nums[i], val + 1);
        } else {
          map.set(nums[i], 1);
        }
        size = Math.max(size, map.get(nums[i]));
      }
      // console.log(size, map);
      let h = new Map();
      for (let i = 0; i < nums.length; i++) {
        let cur = nums[i];
        if (h.has(cur)) {
          h.set(cur, h.get(cur) + 1);
        } else {
          h.set(cur, 1);
        }
        if (h.get(cur) == size) {
          let start = nums.indexOf(cur);
          distance = Math.min(distance, i - start + 1);
        }
      }
      return distance;
    };
    console.log("222222222", findShortestSubArray(nums));
    console.log("6666666", findShortestSubArray(nums2));
    console.log("111111111", findShortestSubArray([0]));
    console.log("222222", findShortestSubArray([1, 1]));
    console.log("33333", findShortestSubArray([1, 2, 1]));
  </script>
</html>
