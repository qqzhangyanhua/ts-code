<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body></body>
  <script>
    // function TreeNode(val, left, right) {
    //   this.val = val === undefined ? 0 : val;
    //   this.left = left === undefined ? null : left;
    //   this.right = right === undefined ? null : right;
    // }
    // //
    // const root = {
    //   val: "A",
    //   left: {
    //     val: "B",
    //     left: {
    //       val: "D",
    //     },
    //     right: {
    //       val: "E",
    //     },
    //   },
    //   right: {
    //     val: "C",
    //     right: {
    //       val: "F",
    //     },
    //   },
    // };

    const aRoot = {
      val: 1,
      left: { val: 111 },
      right: { val: 11111, left: { val: 1 }, right: { val: 4 } },
    };

    class Node {
      constructor(val, next) {
        this.val = val !== undefined ? val : -1;
        this.next = next !== undefined ? next : null;
      }
    }
    var subdomainVisit = function (cpdomains) {
      let obj = new Map();
      for (let i = 0; i < cpdomains.length; i++) {
        let count = 0;
        let str = "";
        count = +cpdomains[i].split(" ")[0];
        str = cpdomains[i].split(" ")[1];
        obj.has(str) ? obj.set(str, obj.get(str) + count) : obj.set(str, count);
        while (str.indexOf(".") > -1) {
          str = str.substr(str.indexOf(".") + 1);
          obj.has(str)
            ? obj.set(str, obj.get(str) + count)
            : obj.set(str, count);
        }
      }
      let arr = [];
      obj.forEach((value, key, map) => {
        let str = value + " " + key;
        arr.push(str);
      });
      return arr;
    };
    var cpdomains = ["9001 discuss.leetcode.com"];
    /**
     * @param {string[]} cpdomains
     * @return {string[]}
     */
    var subdomainVisits = function (cpdomains) {
      let map = new Map();
      for (let i = 0; i < cpdomains.length; i++) {
        let count = 0;
        let str = "";
        count = Number(cpdomains[i].split(" ")[0]);
        str = cpdomains[i].split(" ")[1];
        setMapValue(map, str, count);
        while (str.includes(".")) {
          str = str.substr(str.indexOf(".") + 1);
          setMapValue(map, str, count);
        }
      }
      const arr = [];
      map.forEach((value, key) => {
        let str = value + " " + key;
        arr.push(str);
      });
      console.log(map, arr);
      return arr;
    };
    function setMapValue(map, str, count) {
      if (map.has(str)) {
        const val = map.get(str);
        map.set(str, val + count);
      } else {
        map.set(str, count);
      }
    }
    subdomainVisits(cpdomains);
  </script>
</html>
