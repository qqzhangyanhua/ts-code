<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      var nums = [1, 2, 5, 2, 3];
      /**
       * @param {number[]} nums
       * @param {number} target
       * @return {number[]}
       */
      var targetIndices = function (nums, target) {
        nums = nums.sort((a, b) => a - b);
        console.log(nums);
        let l = 0;
        let r = nums.length - 1;
        if (nums.length === 1 && target === nums[0]) {
          res.push(0);
        }
        const set = new Set();
        while (l <= r) {
          let mid = l + ((r - l) >> 1); //取mid
          if (nums[mid] < target) {
            l = mid + 1;
          } else if (nums[mid] > target) {
            r = mid - 1;
          } else if (nums[mid] === target) {
            set.add(mid);
            if (nums[mid] < nums[r]) {
              //   set.add(r);
              r--;
            } else if (nums[mid] > nums[l]) {
              //   set.add(l);
              l++;
            } else if (nums[mid] > nums[mid - 1]) {
              console.log("右查找", l);
              l = mid + 1;
            } else if (nums[mid] < nums[mid + 1]) {
              console.log("左查找", r);
              r = mid - 1;
            } else if (nums[mid] === [l]) {
              set.add(l);
              l++;
            } else if (nums[mid] === nums[r]) {
              set.add(r);
              r--;
            }
          }
        }
        return [...set].sort((a, b) => a - b);
      };
      var nums2 = [
        100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100,
        100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100,
        100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100,
        100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100,
        100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100,
        100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100,
        100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100,
        100, 100,
      ];

      console.log("22222", targetIndices(nums2, 100));
    </script>
  </body>
</html>
